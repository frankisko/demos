{% extends "templates/layouts/base_maps.html" %}
{% block layout_title %}Google Maps Javascript API v3: Eventos{% endblock %}
{% block layout_scripts_styles %}
	{{ super() }}
	<script type="text/javascript">
		$(document).ready(function(){
			var cantidad = 0;
			map.setZoom(4);
			
			var markersArray = [];
	        	
        	google.maps.event.addListener(map, 'click', function(e) {    			
				var marker = new google.maps.Marker({
        			map: map,
        			position: e.latLng            			
    			});
    			markersArray.push(marker);
    			cantidad++;
    			$("#cantidad").html(cantidad);
			});
  				
			$("#borrar").click(function(){
				for (var i = 0; i < markersArray.length; i++ ) {
    				markersArray[i].setMap(null);
  				}
  				cantidad = 0;
  				$("#cantidad").html("0");
			});
	});
  	</script>
{% endblock %}
{% block layout_content %}
	<h2>Google Maps / Eventos</h2>
	<div class="container">
	<div class="tabbable">
	  	<ul id="myTab" class="nav nav-tabs">
	  		<li><a href="#demo" data-toggle="tab" id="demoTab">Demo</a></li>
	  		<li><a href="#descripcion" data-toggle="tab">Descripción</a></li>
		    <li><a href="#codigo" data-toggle="tab">Código</a></li>
	    </ul>
  		<div class="tab-content" id="myTabContent">
  			 <div id="descripcion" class="tab-pane">
  			 	<h4>Para crear un evento se necesita:</h4>
  			 	<ul>
  			 		<li>Crear el mapa.</li>
  			 		<li>Crear el evento que escuche una acción y actuar en respuesta.</li>
  			 	</ul>
  			 	<h4>Links</h4>
  			 	<p><a href="https://developers.google.com/maps/documentation/javascript/reference#event" target="_blank">Event</a></p>
			</div>
			<div id="demo" class="tab-pane">
				<p><input type="button" id="borrar" value="Borrar markers" class="btn btn-primary"/> (Markers: <span id="cantidad">0</span>)</p>
				<div id="map_canvas"></div>
	        </div>
	        <div id="codigo" class="tab-pane">
				<pre class="brush: js">
&lt;script src="https://maps.googleapis.com/maps/api/js?sensor=false"&gt;&lt;/script&gt;
&lt;script&gt;
var map;
var cantidad = 0;

function initialize() {
	var myLatLng = new google.maps.LatLng(22.105998799750566,-101.6015625);
	var mapOptions = {
    	zoom: 4,
      	center: myLatLng,
      	mapTypeId: google.maps.MapTypeId.ROADMAP
	};

	var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);	
	
	var markersArray = [];
	
	google.maps.event.addListener(map, 'click', function(e) {    			
		var marker = new google.maps.Marker({
			map: map,
			position: e.latLng            			
		});
		markersArray.push(marker);
		cantidad++;
		document.getElementById('cantidad').innerHTML = cantidad;
	});
	
	google.maps.event.addDomListener(document.getElementById('borrar'), 'click', function(){ 	  				
		for (var i = 0; i &lt; markersArray.length; i++ ) {
			markersArray[i].setMap(null);
		}
		cantidad = 0;
		document.getElementById('cantidad').innerHTML = '0';		  				
	});         	
}

google.maps.event.addDomListener(window, 'load', initialize);
&lt;/script&gt;
				</pre>		
			</div>
		</div>
	</div>
</div>  		    		
{% endblock %}